{% extends 'base.html' %}

{% block content %}
<div class="jumbotron text-center">
  <h1>Django+AJAX</h1>
  <h4>AJAX  기술을 이용해서 Django 서버 프로그램을 요청합니다.</h4>
</div>
<div class="card-deck">
  <div class="card bg-primary">
    <div class="card-body text-center">
      <p id="blue" class="card-text" onclick="ajax_proc(this)" style="border:1px dotted black">클릭해 보셔용</p>
    </div>
  </div>
  <div class="card bg-warning">
    <div class="card-body text-center">
      <p id="yellow" class="card-text" onclick="ajax_proc(this)" style="border:1px dotted black">클릭해 보셔용</p>
    </div>
  </div>
  <div class="card bg-success">
    <div class="card-body text-center">
      <p id="green" class="card-text" onclick="ajax_proc(this)" style="border:1px dotted black">클릭해 보셔용</p>
    </div>
  </div>
  <div class="card bg-danger">
    <div class="card-body text-center">
      <p id="red" class="card-text" onclick="ajax_proc(this)" style="border:1px dotted black">클릭해 보셔용</p>
    </div>
  </div>
</div>
<script>
    function ajax_proc(target) {
      var xhr = new XMLHttpRequest();
      xhr.onload = function () {
        var obj = JSON.parse(xhr.responseText);
        target.innerHTML += "<br>"+target.id+" : "+obj.time;
      }
      xhr.open("GET", "/secondapp/json2/")
      xhr.send()
    }
</script>
{% endblock %}
